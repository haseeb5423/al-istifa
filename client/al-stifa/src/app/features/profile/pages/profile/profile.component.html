<div class="main-container" *ngIf="profileData">
  <form class="profile-container" [formGroup]="profileForm">
    <div class="header">
      <div class="avatar">
        <img
          [src]="imagePreview && isEditing ? imagePreview : profileData.profileImagePath || 'assets/images/default-avtar.jpg'"
          alt="avatar"
        />
        <div class="avtar-overlay" [style.display]="isEditing ? 'block' : 'none'">
          <input
            title="profile-image"
            type="file"
            class="profile-image"
            id="profile-image" 
            accept=".png,.jpg,.jpeg"
            (change)="onAvatarSelected($event)" 
          />
        </div>
      </div>
      <div class="info">
        <ng-container *ngIf="isEditing; else viewMode">
          <input type="text" formControlName="name" class="edit-input" placeholder="Name" />
          <input type="email" formControlName="email" class="edit-input" placeholder="Email" />
          <p>{{ profileData.role }}</p>
        </ng-container>
        <ng-template #viewMode>
          <p>{{ profileData.name }}</p>
          <p>{{ profileData.email }}</p>
          <p>{{ profileData.role }}</p>
        </ng-template>
      </div>
      <div class="profile-actions">
        <button
          type="button"
          [class.editingMode]="isEditing"
          title="Edit Profile"
          (click)="isEditing ? saveChanges() : onEditing()"
        >
          {{ isEditing ? 'Save Changes' : 'Edit Profile' }}
        </button>
        <button *ngIf="isEditing" type="button" class="cancel-btn" title="Cancel Editing" (click)="onCancelEdit()">
          Cancel
        </button>
      </div>
    </div>
    <div class="details">
      <div class="bio">
        <span class="section-title bio-title">Biography</span>
        <textarea
          formControlName="bio"
          placeholder="Write about yourself, your expertise in Islamic studies, and your academic background..."
          rows="6"
        ></textarea>
        <span class="section-title maslak-title">Islamic School of Thought</span>
        <div class="select-wrapper">
          <select title="maslaks" name="maslaks" id="maslaks" formControlName="maslakId">
            <option *ngFor="let maslak of maslaks" [value]="maslak.maslakId">
              {{ maslak.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="proofs">
        <span class="section-title certificate-title">Upload Credentials</span>
        <div class="file-input-wrapper">
          <div class="file-input">
            <input
              (change)="onProofFileSelected($event)"
              title="certificate"
              type="file"
              class="certificate"
              id="certificate"
              accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
            />
            <div class="file-input-display">
              <div class="file-icon">ðŸ“‹</div>
              <div class="file-text">
                <div class="main-text">Upload Certificate</div>
                <div class="sub-text">PDF, DOC, or Image files</div>
              </div>
            </div>
          </div>
        </div>
        <span class="section-title social-title">Social Media Profile</span>
        <div class="social-input-wrapper">
          <input
            title="social-links"
            type="text"
            id="social-links"
            formControlName="socialMediaLink"
          />
        </div>
      </div>
    </div>
  </form>
</div>  